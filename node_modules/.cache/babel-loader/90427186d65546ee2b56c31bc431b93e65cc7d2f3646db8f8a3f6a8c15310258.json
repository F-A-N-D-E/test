{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import ResolCSS from'../styles/Resolution.module.css';import Resolution from\"./Resolution\";import{setRandomSort}from\"../layouts/additionaleFunc\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ResolutionForm(){let[data,setData]=useState([]);const getTestFromDB=async()=>{let paramId=window.location.pathname.split('/')[2];let dataProcess={};let dataFromServer=await fetch(`/resolution/${paramId}`).then(res=>res.json()).then(r=>r.data);for(let key in dataFromServer){let split=key.split('_');if((+split[0]||+split[0]===0)&&!split[1].startsWith('answer')){dataProcess[+split[0]]={...dataProcess[+split[0]],[split[1]]:dataFromServer[key]};}else if(split[0]==='nameTest'){dataProcess.info=dataFromServer[key];}else if(split[1]){let valFalse=dataFromServer[split[0]+'_answerFalse'];let valTrue=dataFromServer[split[0]+'_answerTrue'];if(typeof valTrue==='object'&&typeof valFalse==='object'){dataProcess[+split[0]].answer=setRandomSort([...valFalse,...valTrue]);}else if(typeof valTrue==='object'&&typeof valFalse==='string'){dataProcess[+split[0]].answer=setRandomSort([...valTrue,valFalse]);}else if(typeof valTrue==='string'&&typeof valFalse==='object'){dataProcess[+split[0]].answer=setRandomSort([...valFalse,valTrue]);}else if(typeof valTrue==='string'&&typeof valFalse==='string'){dataProcess[+split[0]].answer=setRandomSort([valTrue,valFalse]);}else if(!valTrue){dataProcess[+split[0]].answer=[valFalse];}else if(!valFalse){dataProcess[+split[0]].answer=[valTrue];}}}dataProcess=Object.values(dataProcess);setData(dataProcess);};useEffect(()=>{getTestFromDB();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:data?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{method:\"POST\",children:[data.map((elem,index)=>{if(typeof elem!=='object'){return/*#__PURE__*/_jsx(\"h3\",{className:ResolCSS.resH3,children:elem},index);}}),data.map((elem,index)=>{if(typeof elem==='object'){if(index===0){return/*#__PURE__*/_jsx(\"div\",{className:ResolCSS.res+' '+ResolCSS.topBorder,children:/*#__PURE__*/_jsx(Resolution,{data:elem,num:index})},index);}else{return/*#__PURE__*/_jsx(\"div\",{className:ResolCSS.res,children:/*#__PURE__*/_jsx(Resolution,{data:elem,num:index})},index);}}}),/*#__PURE__*/_jsx(\"button\",{className:ResolCSS.btnAdd,type:\"submit\",children:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C\"})]})}):/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430\"})});}","map":{"version":3,"names":["React","useEffect","useState","ResolCSS","Resolution","setRandomSort","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResolutionForm","data","setData","getTestFromDB","paramId","window","location","pathname","split","dataProcess","dataFromServer","fetch","then","res","json","r","key","startsWith","info","valFalse","valTrue","answer","Object","values","children","method","map","elem","index","className","resH3","topBorder","num","btnAdd","type"],"sources":["D:/javascript/express-react-app/client/src/resolution/ResolutionForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport ResolCSS from '../styles/Resolution.module.css'\r\n\r\nimport Resolution from \"./Resolution\";\r\nimport { setRandomSort } from \"../layouts/additionaleFunc\";\r\n\r\nexport default function ResolutionForm() {\r\n    let [data, setData] = useState([])\r\n\r\n    const getTestFromDB = async () => {\r\n        let paramId = window.location.pathname.split('/')[2]\r\n        let dataProcess = {}\r\n        let dataFromServer = await fetch(`/resolution/${paramId}`).then(res => res.json()).then(r => r.data)\r\n\r\n        for (let key in dataFromServer) {\r\n            let split = key.split('_')\r\n\r\n            if ((+split[0] || +split[0] === 0) && !split[1].startsWith('answer')) {\r\n                dataProcess[+split[0]] = {\r\n                    ...dataProcess[+split[0]],\r\n                    [split[1]]: dataFromServer[key]\r\n                }\r\n\r\n            } else if (split[0] === 'nameTest') {\r\n                dataProcess.info = dataFromServer[key]\r\n\r\n            } else if (split[1]) {\r\n                let valFalse = dataFromServer[split[0] + '_answerFalse']\r\n                let valTrue = dataFromServer[split[0] + '_answerTrue']\r\n\r\n                if (typeof valTrue === 'object' && typeof valFalse === 'object') {\r\n                    dataProcess[+split[0]].answer = setRandomSort([...valFalse, ...valTrue])\r\n                } else if (typeof valTrue === 'object' && typeof valFalse === 'string') {\r\n                    dataProcess[+split[0]].answer = setRandomSort([...valTrue, valFalse])\r\n                } else if (typeof valTrue === 'string' && typeof valFalse === 'object') {\r\n                    dataProcess[+split[0]].answer = setRandomSort([...valFalse, valTrue])\r\n                } else if (typeof valTrue === 'string' && typeof valFalse === 'string') {\r\n                    dataProcess[+split[0]].answer = setRandomSort([valTrue, valFalse])\r\n                } else if (!valTrue) {\r\n                    dataProcess[+split[0]].answer = [valFalse]\r\n                } else if (!valFalse) {\r\n                    dataProcess[+split[0]].answer = [valTrue]\r\n                }\r\n            }\r\n        }\r\n\r\n        dataProcess = Object.values(dataProcess)\r\n        setData(dataProcess)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getTestFromDB()\r\n    }, [])\r\n    return <>\r\n        {data ? <>\r\n            <form method=\"POST\" >\r\n\r\n                {data.map((elem, index) => {\r\n                    if (typeof elem !== 'object') {\r\n                        return <h3 className={ResolCSS.resH3} key={index}>{elem}</h3>\r\n                    }\r\n                })}\r\n\r\n                {data.map((elem, index) => {\r\n                    if (typeof elem === 'object') {\r\n\r\n                        if (index === 0) {\r\n                            return <div key={index} className={ResolCSS.res + ' ' + ResolCSS.topBorder}><Resolution data={elem} num={index} /></div>\r\n                        } else {\r\n                            return <div key={index} className={ResolCSS.res}><Resolution data={elem} num={index} /></div>\r\n                        }\r\n                    }\r\n                })}\r\n\r\n\r\n\r\n                <button className={ResolCSS.btnAdd} type=\"submit\" >Завершить</button>\r\n            </form>\r\n\r\n        </>\r\n            : <div>Загрузка</div>}\r\n    </>\r\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,iCAAiC,CAEtD,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,aAAa,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE3D,cAAe,SAAS,CAAAC,cAAcA,CAAA,CAAG,CACrC,GAAI,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAElC,KAAM,CAAAa,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CAAAC,OAAO,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACpD,GAAI,CAAAC,WAAW,CAAG,CAAC,CAAC,CACpB,GAAI,CAAAC,cAAc,CAAG,KAAM,CAAAC,KAAK,CAAC,eAAeP,OAAO,EAAE,CAAC,CAACQ,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAACF,IAAI,CAACG,CAAC,EAAIA,CAAC,CAACd,IAAI,CAAC,CAEpG,IAAK,GAAI,CAAAe,GAAG,GAAI,CAAAN,cAAc,CAAE,CAC5B,GAAI,CAAAF,KAAK,CAAGQ,GAAG,CAACR,KAAK,CAAC,GAAG,CAAC,CAE1B,GAAI,CAAC,CAACA,KAAK,CAAC,CAAC,CAAC,EAAI,CAACA,KAAK,CAAC,CAAC,CAAC,GAAK,CAAC,GAAK,CAACA,KAAK,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,QAAQ,CAAC,CAAE,CAClER,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAG,CACrB,GAAGC,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CACzB,CAACA,KAAK,CAAC,CAAC,CAAC,EAAGE,cAAc,CAACM,GAAG,CAClC,CAAC,CAEL,CAAC,IAAM,IAAIR,KAAK,CAAC,CAAC,CAAC,GAAK,UAAU,CAAE,CAChCC,WAAW,CAACS,IAAI,CAAGR,cAAc,CAACM,GAAG,CAAC,CAE1C,CAAC,IAAM,IAAIR,KAAK,CAAC,CAAC,CAAC,CAAE,CACjB,GAAI,CAAAW,QAAQ,CAAGT,cAAc,CAACF,KAAK,CAAC,CAAC,CAAC,CAAG,cAAc,CAAC,CACxD,GAAI,CAAAY,OAAO,CAAGV,cAAc,CAACF,KAAK,CAAC,CAAC,CAAC,CAAG,aAAa,CAAC,CAEtD,GAAI,MAAO,CAAAY,OAAO,GAAK,QAAQ,EAAI,MAAO,CAAAD,QAAQ,GAAK,QAAQ,CAAE,CAC7DV,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAACa,MAAM,CAAG5B,aAAa,CAAC,CAAC,GAAG0B,QAAQ,CAAE,GAAGC,OAAO,CAAC,CAAC,CAC5E,CAAC,IAAM,IAAI,MAAO,CAAAA,OAAO,GAAK,QAAQ,EAAI,MAAO,CAAAD,QAAQ,GAAK,QAAQ,CAAE,CACpEV,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAACa,MAAM,CAAG5B,aAAa,CAAC,CAAC,GAAG2B,OAAO,CAAED,QAAQ,CAAC,CAAC,CACzE,CAAC,IAAM,IAAI,MAAO,CAAAC,OAAO,GAAK,QAAQ,EAAI,MAAO,CAAAD,QAAQ,GAAK,QAAQ,CAAE,CACpEV,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAACa,MAAM,CAAG5B,aAAa,CAAC,CAAC,GAAG0B,QAAQ,CAAEC,OAAO,CAAC,CAAC,CACzE,CAAC,IAAM,IAAI,MAAO,CAAAA,OAAO,GAAK,QAAQ,EAAI,MAAO,CAAAD,QAAQ,GAAK,QAAQ,CAAE,CACpEV,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAACa,MAAM,CAAG5B,aAAa,CAAC,CAAC2B,OAAO,CAAED,QAAQ,CAAC,CAAC,CACtE,CAAC,IAAM,IAAI,CAACC,OAAO,CAAE,CACjBX,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAACa,MAAM,CAAG,CAACF,QAAQ,CAAC,CAC9C,CAAC,IAAM,IAAI,CAACA,QAAQ,CAAE,CAClBV,WAAW,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAACa,MAAM,CAAG,CAACD,OAAO,CAAC,CAC7C,CACJ,CACJ,CAEAX,WAAW,CAAGa,MAAM,CAACC,MAAM,CAACd,WAAW,CAAC,CACxCP,OAAO,CAACO,WAAW,CAAC,CACxB,CAAC,CAEDpB,SAAS,CAAC,IAAM,CACZc,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CACN,mBAAOR,IAAA,CAAAI,SAAA,EAAAyB,QAAA,CACFvB,IAAI,cAAGN,IAAA,CAAAI,SAAA,EAAAyB,QAAA,cACJ3B,KAAA,SAAM4B,MAAM,CAAC,MAAM,CAAAD,QAAA,EAEdvB,IAAI,CAACyB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,GAAK,CACvB,GAAI,MAAO,CAAAD,IAAI,GAAK,QAAQ,CAAE,CAC1B,mBAAOhC,IAAA,OAAIkC,SAAS,CAAEtC,QAAQ,CAACuC,KAAM,CAAAN,QAAA,CAAcG,IAAI,EAAZC,KAAiB,CAAC,CACjE,CACJ,CAAC,CAAC,CAED3B,IAAI,CAACyB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,GAAK,CACvB,GAAI,MAAO,CAAAD,IAAI,GAAK,QAAQ,CAAE,CAE1B,GAAIC,KAAK,GAAK,CAAC,CAAE,CACb,mBAAOjC,IAAA,QAAiBkC,SAAS,CAAEtC,QAAQ,CAACsB,GAAG,CAAG,GAAG,CAAGtB,QAAQ,CAACwC,SAAU,CAAAP,QAAA,cAAC7B,IAAA,CAACH,UAAU,EAACS,IAAI,CAAE0B,IAAK,CAACK,GAAG,CAAEJ,KAAM,CAAE,CAAC,EAAjGA,KAAsG,CAAC,CAC5H,CAAC,IAAM,CACH,mBAAOjC,IAAA,QAAiBkC,SAAS,CAAEtC,QAAQ,CAACsB,GAAI,CAAAW,QAAA,cAAC7B,IAAA,CAACH,UAAU,EAACS,IAAI,CAAE0B,IAAK,CAACK,GAAG,CAAEJ,KAAM,CAAE,CAAC,EAAtEA,KAA2E,CAAC,CACjG,CACJ,CACJ,CAAC,CAAC,cAIFjC,IAAA,WAAQkC,SAAS,CAAEtC,QAAQ,CAAC0C,MAAO,CAACC,IAAI,CAAC,QAAQ,CAAAV,QAAA,CAAE,wDAAS,CAAQ,CAAC,EACnE,CAAC,CAET,CAAC,cACG7B,IAAA,QAAA6B,QAAA,CAAK,kDAAQ,CAAK,CAAC,CAC3B,CAAC,CACP","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}