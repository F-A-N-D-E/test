{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import AuthorizCSS from'../styles/Authorization.module.css';import AppCSS from'../styles/App.module.css';import{resetLocalStorage}from\"./additionaleFunc\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Authorization(_ref){let{method}=_ref;let refName=useRef(null);let refPass=useRef(null);let refRepeatPass=useRef(null);async function requestToServer(){let url=window.location.pathname;if(url==='/authorization'){await fetch('/authorization').then(r=>r.text()).then(r=>{if(r==='false')alert('Такое имя уже занято');}).catch(err=>console.log(err));}else if(url==='/login'){await fetch('/login').then(r=>r.json()).then(r=>{if(r.reg===false){alert('Неверный логин или пароль');}else if(r.reg===true){window.location.href='/home';}}).catch(err=>console.log(err));}}useEffect(()=>{requestToServer();},[]);return/*#__PURE__*/_jsx(\"div\",{className:AuthorizCSS.back,children:/*#__PURE__*/_jsx(\"form\",{method:method,onKeyDown:e=>{if(e.key==='Enter'&&stopSend()){e.preventDefault();}},children:/*#__PURE__*/_jsxs(\"div\",{className:AuthorizCSS.blockReg,children:[/*#__PURE__*/_jsx(\"div\",{className:AppCSS.logo+' '+AuthorizCSS.autho,children:\"ICF\"}),/*#__PURE__*/_jsxs(\"div\",{className:AuthorizCSS.blockInput,children:[/*#__PURE__*/_jsx(\"p\",{className:AuthorizCSS.authoP,children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043B\\u043E\\u0433\\u0438\\u043D:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",ref:refName,autoComplete:\"off\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:AuthorizCSS.blockInput,children:[/*#__PURE__*/_jsx(\"p\",{className:AuthorizCSS.authoP,children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",ref:refPass,autoComplete:\"off\"})]}),method==='post'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:AuthorizCSS.blockInput,children:[/*#__PURE__*/_jsx(\"p\",{className:AuthorizCSS.authoP,children:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"repeatPassword\",ref:refRepeatPass,autoComplete:\"off\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:AuthorizCSS.btnAutho,onClick:e=>{if(stopSend())e.preventDefault();},children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:AuthorizCSS.switchBtn,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:AuthorizCSS.btnAutho,onClick:e=>{if(stopSend())e.preventDefault();resetLocalStorage();},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/authorization\",className:AuthorizCSS.switchBtn,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/home\",className:AuthorizCSS.switchBtn,children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"})]})})});function stopSend(){let name=refName.current,pass=refPass.current,repeatPass=refRepeatPass.current;if(method==='post'){if(!name.value||!pass.value||!repeatPass.value){alert('Все поля должны быть заполнены');return true;}else if(pass.value!==repeatPass.value){alert('Пароли не совпадают');repeatPass.value='';return true;}else if(pass.value.length<4||/[а-яё]/i.test(pass.value)){alert('Пароль должен быть не меньше четырех символов и состоять из латиницы или цифр');repeatPass.value='';pass.value='';return true;}else{return false;}}else{if(!name.value||!pass.value){alert('Все поля должны быть заполнены');return true;}else if(pass.value.length<4||/[а-яё]/i.test(pass.value)){alert('Пароль должен быть не меньше четырех символов и состоять из латиницы или цифр');pass.value='';return true;}else{return false;}}}}","map":{"version":3,"names":["React","useEffect","useRef","AuthorizCSS","AppCSS","resetLocalStorage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Authorization","_ref","method","refName","refPass","refRepeatPass","requestToServer","url","window","location","pathname","fetch","then","r","text","alert","catch","err","console","log","json","reg","href","className","back","children","onKeyDown","e","key","stopSend","preventDefault","blockReg","logo","autho","blockInput","authoP","type","name","ref","autoComplete","btnAutho","onClick","switchBtn","current","pass","repeatPass","value","length","test"],"sources":["D:/javascript/express-react-app/client/src/layouts/Authorization.jsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\n\r\nimport AuthorizCSS from '../styles/Authorization.module.css'\r\nimport AppCSS from '../styles/App.module.css'\r\nimport { resetLocalStorage } from \"./additionaleFunc\";\r\n\r\nexport default function Authorization({ method }) {\r\n    let refName = useRef(null)\r\n    let refPass = useRef(null)\r\n    let refRepeatPass = useRef(null)\r\n\r\n    async function requestToServer() {\r\n        let url = window.location.pathname\r\n\r\n        if (url === '/authorization') {\r\n\r\n            await fetch('/authorization')\r\n                .then(r => r.text())\r\n                .then(r => {\r\n                    if (r === 'false') alert('Такое имя уже занято')\r\n                })\r\n                .catch(err => console.log(err))\r\n\r\n        } else if (url === '/login') {\r\n\r\n            await fetch('/login')\r\n                .then(r => r.json())\r\n                .then(r => {\r\n                    if (r.reg === false) {\r\n                        alert('Неверный логин или пароль')\r\n                    } else if (r.reg === true) {\r\n                        window.location.href = '/home'\r\n                    }\r\n                })\r\n                .catch(err => console.log(err))\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        requestToServer()\r\n    }, [])\r\n\r\n\r\n\r\n    return <div className={AuthorizCSS.back}>\r\n        <form method={method} onKeyDown={(e) => {\r\n            if (e.key === 'Enter' && stopSend()) {\r\n                e.preventDefault()\r\n            }\r\n        }} >\r\n\r\n            <div className={AuthorizCSS.blockReg}>\r\n\r\n                <div className={AppCSS.logo + ' ' + AuthorizCSS.autho}>ICF</div>\r\n\r\n                <div className={AuthorizCSS.blockInput}>\r\n                    <p className={AuthorizCSS.authoP}>Введите логин:</p>\r\n                    <input type=\"text\" name=\"name\" ref={refName} autoComplete=\"off\" />\r\n                </div>\r\n\r\n                <div className={AuthorizCSS.blockInput}>\r\n                    <p className={AuthorizCSS.authoP}>Введите пароль:</p>\r\n                    <input type=\"password\" name=\"password\" ref={refPass} autoComplete=\"off\" />\r\n                </div>\r\n\r\n                {method === 'post' ?\r\n                    <>\r\n                        <div className={AuthorizCSS.blockInput}>\r\n                            <p className={AuthorizCSS.authoP}>Повторите пароль:</p>\r\n                            <input type=\"password\" name=\"repeatPassword\" ref={refRepeatPass} autoComplete=\"off\" />\r\n                        </div>\r\n\r\n                        <button type=\"submit\" className={AuthorizCSS.btnAutho} onClick={(e) => {\r\n                            if (stopSend()) e.preventDefault()\r\n                        }}>Зарегистрироваться</button>\r\n                        <a href=\"/login\" className={AuthorizCSS.switchBtn}>Войти</a>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <button type=\"submit\" className={AuthorizCSS.btnAutho} onClick={(e) => {\r\n                            if (stopSend()) e.preventDefault()\r\n                            resetLocalStorage()\r\n                        }}>Войти</button>\r\n                        <a href=\"/authorization\" className={AuthorizCSS.switchBtn}>Зарегистрироваться</a>\r\n                    </>\r\n                }\r\n\r\n                <a href=\"/home\" className={AuthorizCSS.switchBtn}>Главная</a>\r\n\r\n            </div>\r\n\r\n        </form>\r\n    </div>\r\n\r\n\r\n\r\n\r\n    function stopSend() {\r\n        let name = refName.current,\r\n            pass = refPass.current,\r\n            repeatPass = refRepeatPass.current\r\n\r\n        if (method === 'post') {\r\n            if (!name.value || !pass.value || !repeatPass.value) {\r\n                alert('Все поля должны быть заполнены')\r\n                return true\r\n            } else if (pass.value !== repeatPass.value) {\r\n                alert('Пароли не совпадают')\r\n                repeatPass.value = ''\r\n                return true\r\n            } else if (pass.value.length < 4 || /[а-яё]/i.test(pass.value)) {\r\n                alert('Пароль должен быть не меньше четырех символов и состоять из латиницы или цифр')\r\n                repeatPass.value = ''\r\n                pass.value = ''\r\n                return true\r\n            } else {\r\n                return false\r\n            }\r\n\r\n        } else {\r\n            if (!name.value || !pass.value) {\r\n                alert('Все поля должны быть заполнены')\r\n                return true\r\n            } else if (pass.value.length < 4 || /[а-яё]/i.test(pass.value)) {\r\n                alert('Пароль должен быть не меньше четырех символов и состоять из латиницы или цифр')\r\n                pass.value = ''\r\n                return true\r\n            } else {\r\n                return false\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}